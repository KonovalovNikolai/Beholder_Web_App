{% extends 'base.html' %}

{% block styles %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fluidbox/2.0.5/css/fluidbox.min.css"
          integrity="sha512-1gVXQF5Q9gL1HvHBLK0y3IAWCorLY9EU+JMTsLBlXgWfgf6EIS/8B27R/nUq1joeKz2N7ZHCNnLCjc+PuqDqDA=="
          crossorigin="anonymous"/>
{% endblock %}

{% block content %}
    <div class="content mb-2 content_margin">
        <div class="row">
            <div class="col-md-2 mr-0 px-0 border-right">
                <ul class="nav nav-pills flex-column ">
                    <li class="nav-item bg-white border menu-verk rounded-left" style="" >
                        <a class="nav-link active  bg-white text-dark" href="#">Фото</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm border border-left-0 bg-white rounded-right">
                <div class="ml-4 my-4">
                    <h1 class="m-0 mb-5">Модерация фотографий студентов.</h1>

                    {% if not avatars %}
                        <p>Нет непроверенных фотографий.</p>
                    {% else %}
                        <div class="d-flex justify-content-between mb-3">
                            <a class="btn btn-outline-primary {% if prev_url == '#' %} disabled {% endif %}"
                               href="{{ prev_url }}"
                               aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="btn btn-outline-primary {% if next_url == '#' %} disabled {% endif %}"
                               href="{{ next_url }}"
                               aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                        <div class="card-deck">
                            {% for avatar in avatars %}
                                <div class="approve-box card" style="max-width: 250px">
                                    <div class="card-body m-auto">
                                        <div class="m-auto" style="max-width: 128px">
                                            <a class="avatar" href="{{ url_for('avatar', filename=avatar.filename) }}"
                                               rel="avatars">
                                                <img src="{{ url_for('avatar', filename=avatar.filename) }}"
                                                     alt="Аватар"
                                                     width="128px"/>
                                            </a>
                                        </div>
                                        <a class="card-title m-auto" href="{{ url_for('profile', user_id=avatar.user.id) }}"
                                           target="_blank">
                                            {{ avatar.user.get_fullname() }}
                                        </a>
                                    </div>
                                    <div class="card-footer">
                                        <div class="btn-group" role="group" aria-label="Approve or reject avatar">
                                            <button type="button" class="approveBtn btn btn-success"
                                                    data-url="{{ url_for('approve_avatar', avatar_id=avatar.id) }}">
                                                <i class="bi bi-x"></i>
                                            </button>
                                            <button type="button" class="approveBtn btn btn-danger"
                                                    data-url="{{ url_for('reject_avatar', avatar_id=avatar.id) }}">
                                                <i class="bi bi-check"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"
            integrity="sha512-JZSo0h5TONFYmyLMqp8k4oPhuo6yNk9mHM+FY50aBjpypfofqtEWsAgRDQm94ImLCzSaHeqNvYuD9382CEn2zw=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fluidbox/2.0.5/js/jquery.fluidbox.min.js"
            integrity="sha512-0kQqdmb3fpKtRwrbCZDlmiwuZgDyPAOLDOu/HyAt4py7lAVDXKknqtqS6dFNV8U8JrHZymQxlO9SFPZ2u8dhMw=="
            crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/approve_avatar.js') }}"></script>
    <script>
        $('.avatar').fluidbox();
    </script>
{% endblock %}
